<Window x:Class="LogInspect.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:LogInspect" Closing="Window_Closing"
		xmlns:views="clr-namespace:LogInspect.Views"
		xmlns:xctk="clr-namespace:Xceed.Wpf.Toolkit;assembly=Xceed.Wpf.Toolkit"
		mc:Ignorable="d" ResizeMode="CanResizeWithGrip" WindowStartupLocation="CenterScreen" 
        Title="Log Inspect" Height="768" Width="1024" Background="{DynamicResource {x:Static SystemColors.ControlBrushKey}}">
	
	<Window.Resources>
		<views:IntPlusOneValueConverter x:Key="intPlusOneValueConverter"/>
	</Window.Resources>
	
	<Window.CommandBindings>
		<CommandBinding Command="Open" CanExecute="OpenCommandBinding_CanExecute" Executed="OpenCommandBinding_Executed"/>
	</Window.CommandBindings>
	
    <DockPanel>
		<StatusBar DockPanel.Dock="Bottom">
			<TextBlock Text="File indexing:"/>
			<TextBlock Text="{Binding SelectedItem.EventIndexer.Position,FallbackValue=NA}"/>
			<TextBlock Text="/"/>
			<TextBlock Text="{Binding SelectedItem.EventIndexer.Target,FallbackValue=NA}"/>
			<Separator/>
			<TextBlock Text="Event filtering:"/>
			<TextBlock Text="{Binding SelectedItem.EventFilterer.Position,FallbackValue=NA}"/>
			<TextBlock Text="/"/>
			<TextBlock Text="{Binding SelectedItem.EventFilterer.Target,FallbackValue=NA}"/>
			<Separator/>
			<TextBlock Text="Events:"/>
			<TextBlock Text="{Binding SelectedItem.EventFilterer.IndexedEventsCount,FallbackValue=NA}"/>
		</StatusBar>

		<StackPanel DockPanel.Dock="Top" Orientation="Horizontal" DataContext="{Binding SelectedItem}">
			<Button Command="Open">
				<Image Source="Images\OpenFile_16x.png" Stretch="None"  />
			</Button>
			<TextBlock Text="Filters " VerticalAlignment="Center"/>
			
			<xctk:CheckComboBox Width="100" ItemsSource="{Binding Severities}" SelectedMemberPath="IsChecked" DisplayMemberPath="Name"/>
		</StackPanel>

		<TabControl ItemsSource="{Binding LogFiles}" SelectedItem="{Binding SelectedItem}">
			<TabControl.ItemTemplate>
				<DataTemplate>
					<TextBlock Text="{Binding Name}"/>
				</DataTemplate>
			</TabControl.ItemTemplate>
			<TabControl.ContentTemplate>
				<DataTemplate>
					<views:EventView/>
				</DataTemplate>
			</TabControl.ContentTemplate>
		</TabControl>
	</DockPanel>
</Window>
